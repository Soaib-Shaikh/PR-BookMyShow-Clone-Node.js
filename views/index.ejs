<!doctype html>
<html lang="en">

<head>
    <title>Book My Show</title>
    <!-- Required meta tags -->
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />

    <!-- Bootstrap CSS v5.2.1 -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous" />
    <link rel="stylesheet" href="/css/style.css">
</head>

<body>

    <%- include('./partials/header')%>

        <main>

            <% if (query && query.loginError) { %>
                <div class="alert alert-danger">Invalid username or password.</div>
                <% } %>

                    <% if (query && query.signupError) { %>
                        <div class="alert alert-danger">Username or email already
                            exists.</div>
                        <% } %>

                            <% if (query && query.signupSuccess) { %>
                                <div class="alert alert-success">Signup successful! Please
                                    login.</div>
                                <% } %>

                                    <section class="banner-recommended container">
                                        <div id="myCarousel" class="carousel slide mb-5" data-bs-ride="carousel">
                                            <div class="carousel-inner">
                                                <!-- Slide 1 -->
                                                <div class="carousel-item active">
                                                    <img src="/images/banner-1.avif" class="d-block" alt="Slide 1"
                                                        style=" object-fit:cover; border-radius:5px;">
                                                </div>
                                                <!-- Slide 2 -->
                                                <div class="carousel-item">
                                                    <img src="/images/banner-2.avif" class="d-block" alt="Slide 2"
                                                        style=" object-fit:cover; border-radius:5px;">
                                                </div>
                                                <!-- Slide 3 -->
                                                <div class="carousel-item">
                                                    <img src="/images/banner-3.avif" class="d-block" alt="Slide 3"
                                                        style=" object-fit:cover; border-radius:5px;">
                                                </div>
                                            </div>

                                            <!-- Controls -->
                                            <button class="carousel-control-prev" type="button"
                                                data-bs-target="#myCarousel" data-bs-slide="prev">
                                                <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                                                <span class="visually-hidden">Previous</span>
                                            </button>
                                            <button class="carousel-control-next" type="button"
                                                data-bs-target="#myCarousel" data-bs-slide="next">
                                                <span class="carousel-control-next-icon" aria-hidden="true"></span>
                                                <span class="visually-hidden">Next</span>
                                            </button>
                                        </div>

                                        <div class="recommended">
                                            <h2 class="text-left mb-4">Recommended Movies</h2>
                                            <div class="row g-4">
                                                <% movies.forEach(movie=> { %>
                                                    <div class="col-sm-6 col-md-4 col-lg-3">
                                                        <div class="movie-card">
                                                            <!-- Poster wrapped with link -->
                                                            <a href="/movies/<%=movie.id %>">
                                                                <div class="poster"
                                                                    style="background-image:url('https://image.tmdb.org/t/p/w500<%= movie.poster_path %>')">
                                                                    <span class="badge-cert">
                                                                        <%= movie.certification || 'U/A' %>
                                                                    </span>
                                                                    <span class="rating">⭐ <%= movie.vote_average %>
                                                                            </span>
                                                                </div>
                                                            </a>

                                                            <!-- Card Body -->
                                                            <div class="card-body p-3">
                                                                <div class="title">
                                                                    <%= movie.title %>
                                                                </div>
                                                                <div class="sub">
                                                                    <%= movie.original_language.toUpperCase() %> •
                                                                        <% if (movie.runtime) { %>
                                                                            <%= Math.floor(movie.runtime / 60) %>h <%=
                                                                                    movie.runtime % 60 %>m
                                                                                    <% } else { %>
                                                                                        2h
                                                                                        <% } %>
                                                                </div>
                                                                <div class="genre mt-1">
                                                                    <%= movie.genres && movie.genres.length ?
                                                                        movie.genres.join(" • ") : '' %>
      </div>

      <div class=" showtimes mt-2">
                                                                        <button
                                                                            class="btn btn-outline-secondary btn-sm">11:00
                                                                            AM</button>
                                                                        <button
                                                                            class="btn btn-outline-secondary btn-sm">2:30
                                                                            PM</button>
                                                                        <button
                                                                            class="btn btn-outline-secondary btn-sm">6:45
                                                                            PM</button>
                                                                </div>
                                                            </div>

                                                            <!-- Footer -->
                                                            <div
                                                                class="card-footer p-3 d-flex justify-content-between align-items-center">
                                                                <div class="price">₹ 250 onwards</div>
                                                                <!-- Book button removed -->
                                                            </div>
                                                        </div>
                                                    </div>

                                                    <% }) %>
                                            </div>

                                        </div>
                                    </section>
        </main>

        <%- include('./partials/footer.ejs')%>

            <!-- Bootstrap JavaScript Libraries -->
            <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.8/dist/umd/popper.min.js"
                integrity="sha384-I7E8VVD/ismYTF4hNIPjVp/Zjvgyol6VFvRkX/vR+Vc4jQkC+hVqc2pM8ODewa9r"
                crossorigin="anonymous"></script>

            <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.min.js"
                integrity="sha384-BBtl+eGJRgqQAUMxJ7pMwbEyER4l1g+O15P+16Ep7Q9Q+zqX6gSbd85u4mG4QzX+"
                crossorigin="anonymous"></script>
            <%- include('./partials/authModal') %>
                <!-- Add this inside your modal, e.g. above the tab-content in authModal.ejs -->
</body>

</html>